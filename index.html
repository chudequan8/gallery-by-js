<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>my gallary</title>
	<link rel="stylesheet" href="build/css/main.css">
</head>
<body onselectstart="return false" ondragstart="return false">
	<div class="wrap" id="wrap"></div>
	<script src="build/js/gallary.min.js"></script>
	
	<script>
		/*
		 * 初始化构造函数
		 * params: 图片排列方式	
		 * 1.annular: 环形排列	
		 * 2.random: 随机排列	
		 */
		var myGallary = new Gallary();

		// 获取图片列表信息
		(function getData(){

			var req = new XMLHttpRequest();
			req.open("GET", "build/data/data.json");
			req.send();
			req.onreadystatechange = function(){
				if(req.readyState === 4){
					if(req.status === 200){
						var res = JSON.parse(req.responseText);
						myGallary.addPhotos(res);	// 把获得的图片信息放入模板并执行一次排序
						[].forEach.call(document.querySelectorAll('.desc'), function (el) {
							Ps.initialize(el);
						});
					}
					else {
						alert("发生错误" + req.status);
					}
				}
			}

		})(myGallary);
	</script>
</body>
</html>